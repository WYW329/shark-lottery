<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>é¯Šé­šæŠ½çå°éŠæˆ²</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.6s;
    background: #f0f8ff;
    overflow: hidden;
}

.container {
    text-align: center;
    position: relative;
    z-index: 1;
}

button {
    padding: 14px 30px;
    font-size: 20px;
    cursor: pointer;
    border-radius: 8px;
    border: none;
    background: #0078d7;
    color: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    margin: 8px;
}
button:hover { background: #005fa3; }

#result {
    margin-top: 16px;
    font-size: 22px;
    min-height: 30px;
}

#shark-area {
    margin-top: 20px;
    min-height: 220px;
}

.hidden { display: none; }

/* ===== èƒŒæ™¯å½±ç‰‡ ===== */
.bg-video {
    position: fixed;
    top: 50%;
    left: 50%;

    min-width: 100%;
    min-height: 100%;

    width: auto;
    height: auto;

    transform: translate(-50%, -50%);
    object-fit: cover;

    z-index: -1;
    opacity: 0.6;
}

/* ===== æŠ½çç•«é¢æŒ‰éˆ•æ©˜è‰² ===== */
#draw-screen button { background: orange; }
#draw-screen button:hover { background: darkorange; }

/* ===== å‹•ç•« ===== */
.spin3s { animation: spin 1.8s linear infinite; }
@keyframes spin { from {transform:rotate(0)} to {transform:rotate(360deg)} }

/* çµæœè·³å‹• */
@keyframes pop {
  0%{transform:scale(0.7);}
  60%{transform:scale(1.2);}
  100%{transform:scale(1);}
}
.pop { animation: pop 0.6s ease; }

/* ç™½å…‰é–ƒ */
.flash {
 position:fixed;
 top:0;left:0;
 width:100%;height:100%;
 background:white;
 opacity:0;
 pointer-events:none;
 z-index:5;
}
.flash.show { animation: flashAnim 0.5s; }
@keyframes flashAnim {
  0%{opacity:0}
  50%{opacity:0.9}
  100%{opacity:0}
}

/* é€²åº¦æ¢ */
#barBox{
 width:200px;
 height:8px;
 background:#ddd;
 border-radius:5px;
 margin:10px auto;
 overflow:hidden;
}
#bar{
 height:100%;
 width:0%;
 background:orange;
}

/* å½©å¸¶ */
.confetti{
 position:fixed;
 width:8px;
 height:14px;
 top:-20px;
 animation:fall 3s linear forwards;
}
@keyframes fall{
 to{ transform:translateY(110vh) rotate(720deg);}
}
</style>
</head>

<body>

<div id="flash" class="flash"></div>

<video id="bg-video-home" class="bg-video" autoplay muted loop playsinline></video>
<video id="bg-video-draw" class="bg-video hidden" autoplay muted loop playsinline></video>

<div class="container">

<div id="home-screen">
<h1>èèçš„ æƒ…äººç¯€ç¦®ç‰©â¤ï¸</h1>
<p>ä¸€å¤©åªèƒ½æŠ½ä¸€æ¬¡å–”ğŸ¦ˆ</p>
<p>è¨˜å¾—éŒ„å½±å”·!</p>
<button id="startBtn" onclick="startDraw()">é–‹å§‹æŠ½ç</button>
</div>

<div id="draw-screen" class="hidden">
<div id="shark-area"></div>
<div id="barBox" class="hidden"><div id="bar"></div></div>
<div id="result"></div>
<button onclick="goHome()">è¿”å›ä¸»ç•«é¢</button>
</div>

</div>

<script>
let mode="home";
let lock=false;

/* ===== å½±ç‰‡ ===== */
const homeVideos = [
    { src: "videos/sunny.mp4", weight: 1 }, // å‡ºç¾æ©Ÿç‡ä½
    { src: "videos/shark1.mp4", weight: 5 },
    { src: "videos/shark2.mp4", weight: 5 },
    { src: "videos/shark3.mp4", weight: 5 },
    { src: "videos/shark4.mp4", weight: 5 },
    { src: "videos/shark5.mp4", weight: 5 },
    { src: "videos/shark6.mp4", weight: 5 },
    { src: "videos/shark7.mp4", weight: 5 }
];

/* ===== æŠ½çç•«é¢å½±ç‰‡ ===== */
const drawVideos = [
    { src: "videos/sunny.mp4", weight: 1 }, // å‡ºç¾æ©Ÿç‡ä½
    { src: "videos/nh1.mp4", weight: 5 },
    { src: "videos/nh2.mp4", weight: 5 },
    { src: "videos/nh3.mp4", weight: 5 },
    { src: "videos/nh4.mp4", weight: 5 },
    { src: "videos/nh5.mp4", weight: 5 },
    { src: "videos/nh6.mp4", weight: 5 },
    { src: "videos/nh7.mp4", weight: 5 },
    { src: "videos/nh8.mp4", weight: 5 },
    { src: "videos/nh9.mp4", weight: 5 },
    { src: "videos/nh10.mp4", weight: 5 },
    { src: "videos/nh11.mp4", weight: 5 },
    { src: "videos/nh12.mp4", weight: 5 },
    { src: "videos/nh13.mp4", weight: 5 },
];

/* ===== åŠ æ¬Šéš¨æ©Ÿå½±ç‰‡ ===== */
function randomVideo(id,list){
 let v=document.getElementById(id);
 let t=list.reduce((s,x)=>s+x.weight,0);
 let r=Math.random()*t;
 for(let x of list){ if(r<x.weight){v.src=x.src;return;} r-=x.weight;}
}

/* ===== é–‹å§‹æŠ½ç ===== */
function startDraw(){
 if(lock) return;
 lock=true;

 document.getElementById("home-screen").classList.add("hidden");
 document.getElementById("draw-screen").classList.remove("hidden");

 // æ—‹è½‰æœŸé–“å…ˆéš±è—èƒŒæ™¯å½±ç‰‡
 document.getElementById("bg-video-home").classList.add("hidden");
 document.getElementById("bg-video-draw").classList.add("hidden");

 showSpin();
}

/* ===== æ—‹è½‰éšæ®µ ===== */
function showSpin(){
 const area=document.getElementById("shark-area");
 const result=document.getElementById("result");
 const barBox=document.getElementById("barBox");
 const bar=document.getElementById("bar");

 result.textContent="æŠ½çä¸­...";
 area.innerHTML=`<img src="images/spin.png" width="260" class="spin3s">`;
 barBox.classList.remove("hidden");
 bar.style.width="0%";

 let p=0;
 let timer=setInterval(()=>{
  p+=3;
  bar.style.width=p+"%";
 },90);

 setTimeout(()=>{
  clearInterval(timer);
  barBox.classList.add("hidden");

  // æ—‹è½‰çµæŸæ‰é¡¯ç¤ºæŠ½çèƒŒæ™¯å½±ç‰‡
  document.getElementById("bg-video-draw").classList.remove("hidden");
  randomVideo("bg-video-draw", drawVideos);

  showResult();
 },3000);
}

/* ===== ç™½å…‰ ===== */
function flash(){
 const f=document.getElementById("flash");
 f.classList.add("show");
 setTimeout(()=>f.classList.remove("show"),500);
}

/* ===== å½©å¸¶ ===== */
function confetti(){
 for(let i=0;i<40;i++){
  let c=document.createElement("div");
  c.className="confetti";
  c.style.left=Math.random()*100+"%";
  c.style.background=`hsl(${Math.random()*360},80%,60%)`;
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),3000);
 }
}

/* ===== é¡¯ç¤ºçµæœ ===== */
function showResult(){
 flash();
 const area=document.getElementById("shark-area");
 const result=document.getElementById("result");

 // çµæœæ–‡å­—
 const win=Math.random()<0.5;

 // **çµæœéšæ®µä¸é¡¯ç¤ºæ—‹è½‰åœ–ç‰‡**
 area.innerHTML = "";

 result.className="pop";
 result.textContent= win ? "ğŸ‰ æ­å–œä¸­çï¼ å¯ä»¥æŠ½ä¸€æ ¼" : "ğŸ˜¢ æ²’ä¸­çï¼Œæ˜å¤©å†æ¥å†å²ï½";
 result.style.color= win?"green":"red";

 if(win) confetti();

 lock=false;
}

/* ===== è¿”å›ä¸»ç•«é¢ ===== */
function goHome(){
 document.getElementById("home-screen").classList.remove("hidden");
 document.getElementById("draw-screen").classList.add("hidden");
 document.getElementById("bg-video-draw").classList.add("hidden");
 document.getElementById("bg-video-home").classList.remove("hidden");
 randomVideo("bg-video-home",homeVideos);
 document.getElementById("shark-area").innerHTML="";
 document.getElementById("result").textContent="";
 lock=false;
}

window.onload=()=>randomVideo("bg-video-home",homeVideos);
</script>

</body>
</html>

